# Deployment Setup Complete! ðŸŽ‰

## What's Been Created

I've created a complete deployment system for your Raspberry Pi with the following files:

### 1. `deploy.sh` - Full Deployment Script
**Main deployment script with all the bells and whistles**

Features:
- âœ… Colored output for easy reading
- âœ… Pulls latest changes from Git
- âœ… Stops and cleans up old containers
- âœ… Rebuilds Docker images with latest code
- âœ… Starts all services
- âœ… Shows container status and logs
- âœ… Logs everything to `deploy.log`
- âœ… Error handling and validation

Usage:
```bash
./deploy.sh              # Full deployment with rebuild
./deploy.sh --no-rebuild # Skip rebuild, just restart
```

**Time:** ~10-15 minutes on Raspberry Pi

---

### 2. `quick-deploy.sh` - Fast Deployment Script
**For when you just need to update code quickly**

Features:
- âœ… Minimal, fast deployment
- âœ… No rebuild (uses existing images)
- âœ… Perfect for code-only changes

Usage:
```bash
./quick-deploy.sh
```

**Time:** ~30 seconds

---

### 3. `DEPLOYMENT.md` - Complete Documentation
**Everything you need to know about deploying to Raspberry Pi**

Includes:
- ðŸ“– Prerequisites and setup instructions
- ðŸ“– Deployment options and when to use each
- ðŸ“– Troubleshooting common issues
- ðŸ“– Monitoring and management commands
- ðŸ“– Security considerations
- ðŸ“– Performance optimization for Pi
- ðŸ“– Backup and restore procedures
- ðŸ“– Setting up automated deployments with cron

---

### 4. Updated `README.md`
**Main README now includes deployment information**

Added section with:
- Quick start guide for deployment
- Links to detailed documentation
- Summary table of deployment options

---

## How to Use on Your Raspberry Pi

### First Time Setup

1. **SSH into your Pi:**
   ```bash
   ssh pi@your-pi-address
   ```

2. **Clone your repository:**
   ```bash
   cd /home/pi
   git clone <your-repo-url> treasure-hunt
   cd treasure-hunt
   ```

3. **Run the deployment script:**
   ```bash
   ./deploy.sh
   ```

4. **Access your app:**
   - Frontend: http://your-pi-ip
   - Backend: http://your-pi-ip:3000

### Future Deployments

When you push changes and want to deploy:

**For code changes only:**
```bash
ssh pi@your-pi-address
cd treasure-hunt
./quick-deploy.sh
```

**For dependency/config changes:**
```bash
ssh pi@your-pi-address
cd treasure-hunt
./deploy.sh
```

---

## What Each Script Does

### deploy.sh Flow
```
1. Print status messages
2. Navigate to project directory
3. Pull latest changes from Git
4. Stop running containers
5. Clean up old images (saves space on Pi)
6. Build fresh Docker images
7. Start containers
8. Wait for services to be healthy
9. Show container status
10. Display recent logs
11. Print useful commands
12. Log everything to deploy.log
```

### quick-deploy.sh Flow
```
1. Pull latest changes
2. Stop containers
3. Start containers with existing images
4. Done!
```

---

## Useful Commands on Your Pi

```bash
# View deployment logs
tail -f deploy.log

# Check what's running
docker-compose ps

# View live logs
docker-compose logs -f

# View specific service logs
docker-compose logs -f backend

# Restart a service
docker-compose restart frontend

# Stop everything
docker-compose down

# Check resource usage
docker stats
```

---

## Tips for Raspberry Pi

1. **First build takes time** (~10-15 min) - be patient!
2. **Subsequent deploys are faster** with `quick-deploy.sh`
3. **Check deploy.log** if something goes wrong
4. **Use an external SSD** for better performance
5. **Monitor memory** with `free -h` and `docker stats`

---

## Automated Deployments (Optional)

Want automatic deployments? Add to crontab:

```bash
# Edit crontab
crontab -e

# Deploy every day at 2 AM
0 2 * * * cd /home/pi/treasure-hunt && ./deploy.sh >> /home/pi/treasure-hunt/deploy.log 2>&1
```

---

## Troubleshooting

### Script says "permission denied"
```bash
chmod +x deploy.sh quick-deploy.sh
```

### Out of space on Pi
```bash
docker system prune -a
docker volume prune
```

### Container won't start
```bash
docker-compose logs [service-name]
cat deploy.log
```

### Need to rebuild from scratch
```bash
docker-compose down -v
./deploy.sh
```

---

## Summary

You now have:
- âœ… Automated deployment scripts
- âœ… Comprehensive documentation
- âœ… Logging and monitoring
- âœ… Error handling
- âœ… Options for different deployment scenarios

Ready to deploy! ðŸš€

For more details, see [DEPLOYMENT.md](./DEPLOYMENT.md)


